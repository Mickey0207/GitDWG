# DWG檔案Git偵測問題解決指南

## ?? 快速故障排除

### 步驟1: 確認AutoCAD檔案狀態
1. 完全關閉AutoCAD應用程式
2. 在GitDWG應用程式中點擊「檢查CAD檔案」按鈕
3. 查看狀態訊息，確認沒有檔案被標記為「使用中」

### 步驟2: 強制重新整理Git狀態
1. 點擊「強制重新整理」按鈕
2. 等待重新整理完成
3. 檢查「檔案狀態」區域是否顯示您的DWG檔案變更

### 步驟3: 檢查.gitignore設定
1. 開啟您的Git儲存庫資料夾
2. 查看是否存在.gitignore檔案
3. 確認.gitignore中沒有排除*.dwg或*.dxf檔案
4. 如果需要，GitDWG會自動建立最佳化的.gitignore檔案

## ??? 詳細解決方案

### 問題A: Git完全偵測不到DWG檔案

**症狀**: 即使修改了DWG檔案，Git狀態區域也顯示為空白

**解決方法**:
1. 檢查檔案路徑是否在Git儲存庫內
2. 確認檔案沒有被.gitignore排除
3. 檢查檔案權限（確保不是唯讀）
4. 使用「強制重新整理」功能

### 問題B: 檔案顯示為「使用中」無法暫存

**症狀**: 狀態顯示DWG檔案變更，但無法暫存，顯示「檔案使用中」

**解決方法**:
1. 完全關閉AutoCAD（包括所有開啟的圖面）
2. 檢查工作管理員確認acad.exe程序已結束
3. 等待2-3秒鐘
4. 點擊「強制重新整理」
5. 再次嘗試暫存

### 問題C: 大型DWG檔案處理緩慢

**症狀**: DWG檔案很大（>50MB），Git操作很慢

**建議**:
1. 考慮檔案壓縮或最佳化
2. 使用更頻繁的提交策略
3. 考慮設定Git LFS（大檔案儲存）

## ?? 預防措施

### 最佳工作流程
1. **開始工作前**: 確保Git狀態乾淨
2. **工作期間**: 定期儲存，但不急於提交
3. **完成工作後**: 關閉AutoCAD → 檢查Git狀態 → 暫存 → 提交

### 推薦設定
- 定期使用「檢查CAD檔案」功能
- 保持GitDWG應用程式開啟以監控狀態
- 使用描述性的提交訊息
- 為不同設計方案建立分支

## ?? 技術原理

### 為什麼會發生這些問題？

1. **檔案鎖定**: AutoCAD在編輯DWG時會建立檔案鎖，防止其他程序修改
2. **二進制格式**: DWG是二進制格式，Git需要特殊處理
3. **大檔案**: 大型DWG檔案會影響Git性能
4. **暫存檔案**: AutoCAD會建立.dwl、.bak等暫存檔案

### GitDWG如何解決這些問題？

1. **檔案鎖定檢測**: 自動檢測檔案是否被其他程序使用
2. **智慧重新整理**: 強制重新整理Git索引狀態
3. **最佳化設定**: 自動建立.gitignore和.gitattributes檔案
4. **狀態監控**: 即時顯示檔案大小和鎖定狀態

## ?? 仍然無法解決？

如果按照上述步驟仍然無法解決問題，請檢查：

1. **Git版本**: 確保使用較新版本的Git
2. **檔案權限**: 確保對儲存庫資料夾有完整權限
3. **防毒軟體**: 某些防毒軟體可能干擾檔案操作
4. **磁碟空間**: 確保有足夠的磁碟空間
5. **檔案路徑**: 避免過長的檔案路徑或特殊字元

記住：大多數問題都可以透過「關閉AutoCAD → 強制重新整理 → 檢查CAD檔案」這三個步驟解決！