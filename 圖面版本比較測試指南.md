# GitDWG 圖面版本比較功能測試指南

## 功能說明
當您點擊提交版本歷史進行比較時，系統現在會：
1. 自動檢測AutoCAD是否可用
2. 從Git中提取兩個版本的DWG檔案
3. 使用AutoCAD（而非Visual Studio）開啟比較
4. 提供清楚的操作指導

## 測試步驟

### 前置準備
1. **確保AutoCAD已安裝且可用**
   - 點擊「設定AutoCAD路徑」按鈕
   - 選擇AutoCAD的acad.exe檔案（通常在 `C:\Program Files\Autodesk\AutoCAD 20XX\`）

2. **準備測試儲存庫**
   - 選擇或創建一個包含DWG檔案的Git儲存庫
   - 確保至少有2個提交記錄，且包含DWG檔案變更

### 測試版本比較功能

#### 步驟1: 選擇提交
1. 在右側「提交歷史」區域中，點擊選擇一個提交記錄
2. 確認該提交與前一個提交之間有DWG檔案變更

#### 步驟2: 開始比較
1. 點擊「比較選擇的提交」按鈕
2. 系統會分析提交變更並顯示對話框

#### 步驟3: 確認比較
1. 在彈出的「圖面版本比較」對話框中：
   - 查看檔案資訊
   - 查看版本資訊（舊版本 vs 新版本）
   - 點擊「開始比較」

#### 步驟4: AutoCAD開啟
1. 系統會在臨時目錄創建兩個版本的檔案
2. 自動使用AutoCAD開啟兩個版本
3. 您可以在AutoCAD中進行視覺比較

## 預期結果

### ? 成功情況
- AutoCAD會開啟兩個視窗/標籤
- 檔案名稱包含版本資訊（如：`drawing_舊版本_abc1234.dwg`、`drawing_新版本_def5678.dwg`）
- 狀態訊息顯示成功開啟的路徑
- 可以在AutoCAD中進行詳細比較

### ? 可能的問題與解決方案

#### 問題1: 仍然跳到Visual Studio
**原因**: AutoCAD路徑未正確設定
**解決**: 
- 點擊「設定AutoCAD路徑」重新設定
- 確保選擇的是acad.exe而不是其他程式

#### 問題2: 顯示「AutoCAD未找到」
**原因**: 系統找不到AutoCAD
**解決**:
- 檢查AutoCAD是否已安裝
- 手動設定AutoCAD路徑
- 確保有足夠的權限執行AutoCAD

#### 問題3: 檔案無法開啟
**原因**: 可能是權限問題或檔案損壞
**解決**:
- 檢查臨時目錄的權限
- 確認Git儲存庫中的DWG檔案完整

## 智慧提交按鈕測試

### 測試提示功能
1. **空提交訊息**: 將滑鼠停留在提交按鈕上，應顯示「無法提交: 請輸入提交訊息」
2. **未暫存檔案**: 修改檔案但未暫存時，提示「有檔案變更未暫存，請先點擊『暫存所有』」
3. **準備就緒**: 所有條件滿足時，提示「點擊提交變更到Git儲存庫」

## 故障排除

### 如果比較功能不工作
1. 確認AutoCAD路徑設定正確
2. 嘗試手動開啟DWG檔案確認AutoCAD可用
3. 檢查防毒軟體是否阻擋了檔案操作
4. 確保有足夠的磁碟空間存放臨時檔案

### 聯絡支援
如果問題持續，請提供：
- GitDWG版本資訊
- AutoCAD版本
- 錯誤訊息截圖
- 操作步驟記錄

---

**注意**: 比較功能會在系統臨時目錄創建檔案副本，這些檔案會自動清理，但建議定期清理臨時目錄以節省空間。